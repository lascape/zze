<!-- 消息页 -->
<view class="messages-tab">
  <!-- 顶部标题栏 -->
  <view class="messages-header">
    <text class="header-title">消息</text>
    <text class="header-link" bindtap="onSafetyTipsTap">沟通规范</text>
  </view>

  <!-- 分段控制器 -->
  <view class="tab-selector">
    <view 
      class="tab-item {{ activeTab === 'chat' ? 'active' : '' }}" 
      bindtap="onTabSwitch" 
      data-tab="chat">
      私信
    </view>
    <view 
      class="tab-item {{ activeTab === 'notice' ? 'active' : '' }}" 
      bindtap="onTabSwitch" 
      data-tab="notice">
      通知
    </view>
  </view>

  <!-- 私信列表 -->
  <view wx:if="{{ activeTab === 'chat' }}" class="content-section">
    <!-- 空状态 -->
    <view wx:if="{{ chats.length === 0 }}" class="empty-state">
      <view class="empty-icon">
        <t-icon name="chat" size="48" color="#ccc" />
      </view>
      <text class="empty-title">暂无私信</text>
      <text class="empty-desc">在详情页点击"私信TA"即可开始沟通。</text>
    </view>

    <!-- 私信列表 -->
    <view wx:else class="chat-list">
      <view 
        wx:for="{{ chats }}" 
        wx:key="id" 
        class="chat-item" 
        data-id="{{ item.id }}" 
        bindtap="onChatTap">
        <view class="chat-left">
          <view class="chat-avatar">
            <t-icon name="user" size="24" color="#999" />
          </view>
          <view class="chat-info">
            <text class="chat-name">{{ item.peerName }}</text>
            <text class="chat-preview">{{ item.lastMsg }}</text>
          </view>
        </view>
        <view class="chat-right">
          <t-badge wx:if="{{ item.unread > 0 }}" count="{{ item.unread }}" />
          <text wx:else class="chat-read">已读</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 通知列表 -->
  <view wx:if="{{ activeTab === 'notice' }}" class="content-section">
    <!-- 空状态 -->
    <view wx:if="{{ notices.length === 0 }}" class="empty-state">
      <view class="empty-icon">
        <t-icon name="notification" size="48" color="#ccc" />
      </view>
      <text class="empty-title">暂无通知</text>
      <text class="empty-desc">发布信息后，会在这里收到审核结果。</text>
    </view>

    <!-- 通知列表 -->
    <view wx:else class="notice-list">
      <view wx:for="{{ notices }}" wx:key="id" class="notice-item">
        <text class="notice-title">{{ item.title }}</text>
        <text class="notice-time">{{ item.time }}</text>
      </view>
    </view>
  </view>
</view>
