<view class="publish-form-page">
  <scroll-view scroll-y class="form-scroll">
    <view class="form-section">
      <view class="section-title">基本信息</view>
      
      <!-- 标题 -->
      <view class="form-item">
        <text class="label required">标题</text>
        <t-input 
          placeholder="请输入标题" 
          value="{{formData.title}}"
          data-field="formData.title"
          bind:change="onFormDataChange"
        />
      </view>
      
      <!-- 片区 -->
      <view class="form-item">
        <text class="label required">片区</text>
        <t-picker 
          value="{{formData.district}}" 
          options="{{districtOptions}}"
          bind:change="onDistrictChange"
        >
          <view class="picker-trigger">
            <text class="{{formData.district ? '' : 'placeholder'}}">
              {{formData.district || '请选择片区'}}
            </text>
          </view>
        </t-picker>
      </view>
      
      <!-- 描述 -->
      <view class="form-item">
        <text class="label required">详细描述</text>
        <t-textarea 
          placeholder="请输入详细描述" 
          value="{{formData.description}}"
          maxlength="500"
          indicator
          data-field="formData.description"
          bind:change="onFormDataChange"
        />
      </view>
      
      <!-- 图片 -->
      <view class="form-item">
        <text class="label">图片（最多3张）</text>
        <view class="image-list">
          <view wx:for="{{formData.images}}" wx:key="index" class="image-item">
            <image class="preview-image" src="{{item}}" mode="aspectFill" />
            <view class="remove-btn" data-index="{{index}}" bindtap="onRemoveImage">
              <t-icon name="close" size="32rpx" color="#fff" />
            </view>
          </view>
          <view wx:if="{{formData.images.length < 3}}" class="add-image-btn" bindtap="onChooseImage">
            <t-icon name="add" size="60rpx" color="#ccc" />
          </view>
        </view>
      </view>
    </view>

    <!-- 租房特有字段 -->
    <view wx:if="{{category === 'rent'}}" class="form-section">
      <view class="section-title">租房信息</view>
      
      <view class="form-item">
        <text class="label">租金</text>
        <t-input 
          placeholder="如：2500元/月" 
          value="{{rent}}"
          data-field="rent"
          bind:change="onInputChange"
        />
      </view>
      
      <view class="form-item">
        <text class="label">户型</text>
        <t-input 
          placeholder="如：2室1厅" 
          value="{{roomType}}"
          data-field="roomType"
          bind:change="onInputChange"
        />
      </view>
      
      <view class="form-item">
        <text class="label">面积</text>
        <t-input 
          placeholder="如：85㎡" 
          value="{{area}}"
          data-field="area"
          bind:change="onInputChange"
        />
      </view>
      
      <view class="form-item">
        <text class="label">楼层</text>
        <t-input 
          placeholder="如：6/18层" 
          value="{{floor}}"
          data-field="floor"
          bind:change="onInputChange"
        />
      </view>
    </view>

    <!-- 美食特有字段 -->
    <view wx:if="{{category === 'food'}}" class="form-section">
      <view class="section-title">美食信息</view>
      
      <view class="form-item">
        <text class="label">人均价格</text>
        <t-input 
          placeholder="如：人均50元" 
          value="{{avgPrice}}"
          data-field="avgPrice"
          bind:change="onInputChange"
        />
      </view>
      
      <view class="form-item">
        <text class="label">菜系</text>
        <t-input 
          placeholder="如：川菜、粤菜" 
          value="{{cuisine}}"
          data-field="cuisine"
          bind:change="onInputChange"
        />
      </view>
    </view>

    <!-- 二手特有字段 -->
    <view wx:if="{{category === 'secondhand'}}" class="form-section">
      <view class="section-title">物品信息</view>
      
      <view class="form-item">
        <text class="label">价格</text>
        <t-input 
          placeholder="如：800元" 
          value="{{price}}"
          data-field="price"
          bind:change="onInputChange"
        />
      </view>
      
      <view class="form-item">
        <text class="label">成色</text>
        <t-input 
          placeholder="如：9成新" 
          value="{{condition}}"
          data-field="condition"
          bind:change="onInputChange"
        />
      </view>
      
      <view class="form-item">
        <text class="label">品牌</text>
        <t-input 
          placeholder="如：美的" 
          value="{{brand}}"
          data-field="brand"
          bind:change="onInputChange"
        />
      </view>
    </view>

    <!-- 服务特有字段 -->
    <view wx:if="{{category === 'service'}}" class="form-section">
      <view class="section-title">服务信息</view>
      
      <view class="form-item">
        <text class="label">服务类型</text>
        <t-input 
          placeholder="如：家电维修、家政保洁" 
          value="{{serviceType}}"
          data-field="serviceType"
          bind:change="onInputChange"
        />
      </view>
      
      <view class="form-item">
        <text class="label">从业经验</text>
        <t-input 
          placeholder="如：5年经验" 
          value="{{experience}}"
          data-field="experience"
          bind:change="onInputChange"
        />
      </view>
    </view>
  </scroll-view>

  <!-- 底部提交按钮 -->
  <view class="bottom-bar">
    <t-button theme="primary" size="large" block bindtap="onSubmit">
      提交发布
    </t-button>
  </view>
</view>
