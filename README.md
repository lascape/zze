# 社区信息板小程序

一个基于微信小程序原生开发的社区本地信息板 MVP，使用 TDesign 组件库。

> 🚀 **[快速启动指南](./QUICKSTART.md)** - 5分钟快速运行项目

## 功能特性

### 核心功能
- 📍 **社区切换**：用户可以选择和切换当前社区
- 🔍 **发现页**：支持"本社区/附近30km"范围切换，按分类浏览
- 📝 **发布功能**：支持租房、美食、二手、服务四种类型的信息发布
- ✅ **审核系统**：发布后进入审核流程（模拟实现）
- 💬 **私信功能**：用户可通过私信联系发布者
- ⭐ **收藏功能**：收藏感兴趣的信息
- 🔒 **关键词过滤**：防止中介和敏感信息

### 页面结构

#### TabBar 页面
1. **社区页**：当前社区信息流、分类宫格导航
2. **发现页**：范围切换、分类筛选、搜索功能
3. **发布页**：选择发布类型，填写详细信息
4. **消息页**：私信会话列表、系统通知
5. **我的页**：个人资料、我的发布、我的收藏

#### 二级页面
- 详情页：查看帖子详细信息，收藏和私信
- 社区选择页：切换当前社区
- 发布表单页：四种类型的发布表单
- 聊天页：私信对话
- 我的发布页：查看发布状态（审核中/已通过/被驳回）
- 我的收藏页：查看收藏的帖子
- 编辑资料页：修改昵称和头像

## 技术栈

- **框架**：微信小程序原生开发
- **组件库**：TDesign 小程序组件库
- **状态管理**：本地存储 (LocalStorage)
- **数据管理**：Mock 数据 + 本地存储

## 项目结构

```
zze/
├── pages/                  # 页面目录
│   ├── community/         # 社区页
│   ├── discovery/         # 发现页
│   ├── publish/           # 发布页
│   ├── messages/          # 消息页
│   ├── me/                # 我的页
│   ├── detail/            # 详情页
│   ├── community-select/  # 社区选择页
│   ├── publish-form/      # 发布表单页
│   ├── chat/              # 聊天页
│   ├── my-posts/          # 我的发布页
│   ├── my-favorites/      # 我的收藏页
│   └── edit-profile/      # 编辑资料页
├── components/            # 组件目录
│   ├── system-avatar/     # 系统头像组件
│   ├── info-card/         # 信息卡片组件
│   └── navigation-bar/    # 导航栏组件
├── utils/                 # 工具函数
│   ├── storage.js         # 本地存储管理
│   ├── keyword-filter.js  # 关键词过滤
│   └── common.js          # 通用工具函数
├── data/                  # 数据模块
│   ├── communities.js     # 社区数据
│   ├── posts.js           # 帖子数据
│   └── avatars.js         # 系统头像数据
├── assets/                # 资源文件
│   ├── icons/             # TabBar 图标
│   ├── avatars/           # 系统头像
│   └── images/            # 其他图片
├── app.js                 # 小程序入口
├── app.json               # 小程序配置
├── app.wxss               # 全局样式
└── package.json           # 依赖配置
```

## 安装与运行

### 前置要求

- 微信开发者工具
- Node.js（用于安装 npm 包）

### 安装步骤

1. **克隆项目**
   ```bash
   git clone <repository-url>
   cd zze
   ```

2. **安装依赖**
   ```bash
   npm install
   ```

3. **构建 npm**
   
   在微信开发者工具中：
   - 点击菜单：工具 → 构建 npm
   - 等待构建完成

4. **准备资源文件**
   
   由于图标和头像为占位符，您需要：
   - 在 `assets/icons/` 目录下添加 TabBar 图标（PNG 格式）
     - `community.png` / `community-active.png`
     - `discovery.png` / `discovery-active.png`
     - `publish.png` / `publish-active.png`
     - `message.png` / `message-active.png`
     - `me.png` / `me-active.png`
   - 在 `assets/avatars/` 目录下添加系统头像
     - `avatar-1.png` 到 `avatar-8.png`
     - `default.png`

### 运行项目

1. 打开微信开发者工具
2. 选择"导入项目"
3. 选择项目目录
4. 填写 AppID（使用测试号即可）
5. 点击"编译"运行

## 功能说明

### 发布流程

1. 点击底部 TabBar 的"发布"
2. 选择发布类型（租房/美食/二手/服务）
3. 填写表单信息
4. 提交后进入"审核中"状态
5. 5秒后自动审核（80%通过率）
6. 在"我的发布"中查看状态
7. 如果被驳回，可以查看驳回原因并重新提交

### 审核机制（模拟）

- 发布后状态：审核中
- 5秒后自动审核
- 80% 概率通过，20% 概率驳回
- 驳回会提供模板化的驳回原因
- 系统通知会告知审核结果

### 关键词过滤

以下关键词会被拦截：
- 联系方式相关：vx、微信、电话、手机号、加微、同号、qq
- 链接相关：http、https、www
- 其他：二维码、中介

### 范围切换逻辑

- 从社区页分类入口进入发现页：范围=本社区，带入分类
- 从底部 Tab 进入发现页：范围=附近30km（或记忆上次选择）
- 可以手动切换范围

## TDesign 组件使用

项目中使用了以下 TDesign 组件：

- `t-tabs` / `t-tab-panel`: 标签页切换
- `t-search`: 搜索框
- `t-input` / `t-textarea`: 表单输入
- `t-button`: 按钮
- `t-picker`: 选择器
- `t-tag`: 标签
- `t-empty`: 空状态
- `t-loading`: 加载状态
- `t-icon`: 图标
- `t-popup`: 弹窗
- `t-cell` / `t-cell-group`: 列表单元格
- `t-badge`: 徽标
- `t-image`: 图片

## 数据存储

使用微信小程序的 LocalStorage 存储以下数据：

- `current_community`: 当前选中的社区
- `discovery_range`: 发现页范围设置
- `user_info`: 用户信息（昵称、头像）
- `my_posts`: 我的发布列表
- `favorites`: 收藏列表
- `conversations`: 私信会话列表
- `notifications`: 系统通知列表

## 注意事项

1. **图标资源**：需要自行添加 TabBar 图标和系统头像图片
2. **真实数据**：当前使用 Mock 数据，实际应用需要对接后端 API
3. **审核流程**：当前为前端模拟，实际应用需要后端实现
4. **图片上传**：当前仅选择本地图片，实际应用需要上传到服务器
5. **私信功能**：当前为本地模拟，实际应用需要实时通信支持

## MVP 限制

根据产品需求，当前 MVP 版本：

- ✅ 不做评论功能
- ✅ 不做点赞功能
- ✅ 不做置顶精选
- ✅ 仅站内私信（不显示外部联系方式）
- ✅ 关键词过滤在前端实现
- ✅ 位置仅显示到社区+片区级别

## 后续优化方向

1. 对接后端 API
2. 实现真实的审核流程
3. 实现图片上传到云存储
4. 实现实时私信功能
5. 添加搜索功能实现
6. 优化性能和用户体验
7. 添加更多筛选条件
8. 实现内容举报功能

## 许可证

MIT
