# 微信开发者工具使用指南

## 快速开始

### 1. 安装微信开发者工具

下载并安装微信开发者工具：
- 官方下载：https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html
- 支持 Windows、macOS、Linux

### 2. 导入项目

1. 打开微信开发者工具
2. 选择"小程序" → "导入项目"
3. 填写项目信息：
   - 项目目录：选择本项目的根目录
   - AppID：
     - 如有正式 AppID，填入即可
     - 如无，点击"测试号"或"使用测试号"
   - 项目名称：zze 社区信息板
   - 开发模式：小程序

### 3. 构建 npm 包

**重要步骤：** 必须构建 npm 才能使用 TDesign 组件库

1. 在微信开发者工具顶部菜单选择：
   - `工具` → `构建 npm`
2. 等待构建完成（会生成 miniprogram_npm 目录）
3. 构建成功后会提示："构建 npm 成功"

### 4. 项目设置

确保以下设置正确：

1. 点击右上角"详情"按钮
2. 在"本地设置"中：
   - ✅ 不校验合法域名、web-view...
   - ✅ 启用 ES6 转 ES5
   - ✅ 启用增强编译
   - ✅ 不校验请求域名

3. 在"项目配置"中：
   - AppID：确认已填写
   - 基础库版本：建议选择最新稳定版（≥ 2.19.0）

### 5. 运行项目

1. 点击工具栏的"编译"按钮
2. 等待编译完成
3. 在模拟器中查看运行效果

## 常见问题

### Q1: 构建 npm 失败

**原因：** 未安装依赖包

**解决方法：**
```bash
# 在项目根目录运行
npm install
```

### Q2: TDesign 组件不显示

**原因：** 未构建 npm 或构建失败

**解决方法：**
1. 确认已运行 `npm install`
2. 在微信开发者工具中：`工具` → `构建 npm`
3. 查看是否生成了 `miniprogram_npm` 目录

### Q3: 页面报错找不到模块

**原因：** 路径引用错误或文件不存在

**解决方法：**
1. 检查控制台错误信息
2. 确认文件路径是否正确
3. 重新编译项目

### Q4: TabBar 不显示图标

**原因：** 图标文件不存在

**解决方法：**
- 当前版本使用纯文字 TabBar，不需要图标
- 如需添加图标，参考 `assets/icons/README.md`

### Q5: 头像不显示

**原因：** 头像图片文件不存在

**解决方法：**
- 在 `assets/avatars/` 目录添加头像图片
- 或使用默认占位符（不影响功能）
- 参考 `assets/avatars/README.md`

## 调试技巧

### 1. 查看控制台

- 点击底部"Console"查看日志和错误
- 使用 `console.log()` 调试代码

### 2. 查看存储数据

- 点击"Storage"标签
- 查看 Storage → 本地存储
- 可以手动添加/删除/修改存储数据

### 3. 网络请求

- 点击"Network"标签
- 查看所有网络请求（当前项目无网络请求）

### 4. 模拟器功能

- 切换不同设备型号
- 模拟不同网络状态
- 调整屏幕旋转

## 功能测试建议

### 1. 社区切换
1. 进入"社区"页
2. 点击顶部社区名称
3. 选择不同社区
4. 验证列表是否更新

### 2. 发布流程
1. 进入"发布"页
2. 选择一个分类
3. 填写表单（注意避免敏感词）
4. 提交后检查"我的发布"
5. 等待 5 秒查看审核结果
6. 在"消息"中查看通知

### 3. 私信功能
1. 进入任意帖子详情页
2. 点击"私信TA"
3. 发送消息（注意避免敏感词）
4. 返回"消息"页查看会话

### 4. 收藏功能
1. 进入帖子详情页
2. 点击底部收藏按钮
3. 在"我的"页查看收藏数量
4. 进入"我的收藏"查看列表

### 5. 范围切换
1. 从"社区"页点击分类进入发现页
   - 验证默认范围是"本社区"
2. 从底部 Tab 进入发现页
   - 验证默认范围是"附近30km"
3. 手动切换范围验证列表变化

## 性能优化建议

1. **使用分包加载**（可选）
   - 将次要页面放入分包
   - 减少主包大小

2. **图片优化**
   - 使用 WebP 格式
   - 压缩图片大小
   - 使用 CDN 加载

3. **代码优化**
   - 使用 `setData` 时避免更新过多数据
   - 长列表使用虚拟列表
   - 避免频繁的页面跳转

## 发布上线

### 1. 准备工作
- 补充真实的图标和头像资源
- 对接后端 API
- 配置合法域名
- 完善隐私政策

### 2. 上传代码
1. 点击右上角"上传"按钮
2. 填写版本号和备注
3. 上传成功后到小程序管理后台

### 3. 提交审核
1. 登录小程序管理后台
2. 进入版本管理
3. 提交审核并等待通过

### 4. 发布
审核通过后点击"发布"即可上线

## 参考资料

- [微信小程序官方文档](https://developers.weixin.qq.com/miniprogram/dev/framework/)
- [TDesign 小程序组件库](https://tdesign.tencent.com/miniprogram/overview)
- [小程序开发指南](https://developers.weixin.qq.com/ebook?action=get_post_info&docid=0008aeea9a8978ab0086a685851c0a)
